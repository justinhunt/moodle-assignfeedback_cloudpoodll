define("assignfeedback_cloudpoodll/grammarsuggestions",["jquery","core/log","core/str","core/ajax","core/notification","assignfeedback_cloudpoodll/correctionsmarkup"],(function($,log,str,Ajax,notification,correctionsmarkup){return log.debug("Grammar suggestions: initialising"),{controls:{},ready:!1,checking:"... checking ...",nosuggestions:"No suggestions",init:function(){log.debug("Grammar suggestions: initialising"),this.ready=!1,this.init_strings(),this.register_controls(),this.register_events()},init_strings:function(){var that=this;str.get_string("checking","assignfeedback_cloudpoodll").done((function(s){that.checking=s})),str.get_string("nosuggestions","assignfeedback_cloudpoodll").done((function(s){that.nosuggestions=s}))},register_controls:function(){this.controls.checkgrammarbutton=$(".grammarsuggestionstrigger")},register_events:function(){var that=this;that.controls.checkgrammarbutton.click((function(e){var srcelement=$(this).data("src"),targetelement=$(this).data("target"),language=$(this).data("language");return that.check_grammar(that,srcelement,targetelement,language),!1}))},check_grammar:function(that,srcelement,targetelement,language){var text=$(srcelement).val();text&&""!==text&&""!==text.trim()&&($(targetelement).text(that.checking),Ajax.call([{methodname:"assignfeedback_cloudpoodll_check_grammar",args:{text:text,language:language},done:function(ajaxresult){var payloadobject=JSON.parse(ajaxresult);if(payloadobject)if(payloadobject.grammarerrors.length<3)$(targetelement).text(that.nosuggestions);else{$(targetelement).html(payloadobject.suggestions);var opts=[];opts.sessionerrors=payloadobject.grammarerrors,opts.sessionmatches=payloadobject.grammarmatches,correctionsmarkup.init(opts)}else $(targetelement).text(that.nosuggestions),log.debug("result not fetched")},fail:notification.exception}]))}}}));

//# sourceMappingURL=grammarsuggestions.min.js.map